@using Htmx.Components.Table.Models
@model (ITableModel table, ITableRowContext row)

@{
  var isEditing = Model.row.RowAction == RowAction.Edit || (Model.row.RowAction == RowAction.Insert && Model.row.Key == "new");
}

<tr id="@Model.row.RowId" class="@(isEditing ? "editing-row" : "")">
  @foreach (var column in Model.table.Columns)
  {
    var cellPartialView = string.IsNullOrEmpty(column.CellPartialView)
    ? Model.table.TableViewPaths.Cell
    : column.CellPartialView;
    var cellModel = new TableCellPartialModel { Table = Model.table, Row = Model.row, Column = column };
    <td>
      @await Html.PartialAsync(cellPartialView, cellModel)
    </td>
  }
</tr>
